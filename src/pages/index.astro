---
import { getCollection } from "astro:content";
import PostList from "../components/PostList.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
import Layout from "../layouts/Layout.astro";

const allPosts = (await getCollection("posts")).sort(
  (a, b) =>
    new Date(b.data.publishedDate).valueOf() -
    new Date(a.data.publishedDate).valueOf()
);
const pageSize = 10;
const pageItems = allPosts.slice(0, pageSize);
---

<Layout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <PostList
    items={pageItems}
    page={1}
    total={allPosts.length}
    pageSize={pageSize}
    pageBase="/page"
    homePath="/"
    heading="Latest posts"
  />
</Layout>
