<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title></title>
  <style>
  .content {
    position: relative;
  }

  .item {
    position: absolute;
    width: 200px;
    margin-right: 10px;
    margin-left: 10px;
    transition: all 1s;
  }

  .h1 {
    height: 200px;
    background-color: #f4b300;
  }

  .h2 {
    height: 300px;
    background-color: #691bbb;
  }

  .h3 {
    height: 400px;
    background-color: #006ac1;
  }
  </style>
</head>

<body>
  <div class="container">
    <div class="content">
      <div class="item h1">1</div>
      <div class="item h2">2</div>
      <div class="item h3">3</div>
      <div class="item h1">4</div>
      <div class="item h2">5</div>
      <div class="item h2">6</div>
      <div class="item h2">7</div>
      <div class="item h3">8</div>
      <div class="item h3">9</div>
      <div class="item h1">10</div>
      <div class="item h1">11</div>
      <div class="item h2">12</div>
      <div class="item h3">13</div>
      <div class="item h2">14</div>
    </div>
  </div>
  <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
  <script>
  waterfall();

  $(window).resize(function() {
    waterfall();
  });

  function waterfall() {
    var collLength = parseInt($('.content').width() / $('.item').width());
    var itemArr = [];
    for (var i = 0; i < collLength; i++) {
      itemArr[i] = 0;
    }

    $('.item').each(function() {
      var minValue = Math.min.apply(null, itemArr);
      var minIndex = itemArr.indexOf(minValue);

      $(this).css({
        top: itemArr[minIndex],
        left: $(this).outerWidth(true) * minIndex
      });

      itemArr[minIndex] += $(this).outerHeight(true);
    });
  }
  </script>
</body>

</html>
